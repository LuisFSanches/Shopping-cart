<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/fontawesome.min.css" integrity="sha384-wESLQ85D6gbsF459vf1CiZ2+rr+CsxRY0RpiF1tLlQpDnAgg6rwdsUF1+Ics2bni" crossorigin="anonymous">    <title>Dashboard Admin</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@300;400;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <title>Document</title>
</head>
<body>
    <div class="container">
      <header>
        <label for=""></label>
        <div class="marca">
          
          <label for="">CASA DOS CELULARES</label>
          <i class="fas fa-mobile-alt"></i>
        </div>
          <div class="carrinho">
            <button onclick="openCart()"> <i class="fas fa-shopping-cart"></i></button>
            <span class="quantidade" id="quantidade">0</span>
          </div>
          
        
         
      </header>
      <h1>Produtos</h1>
      <div class="container-loja">
  
        <div class="produtos">
          <div class="produto-info" id="produto1">
            <img src="./assets/iphone_10.png" alt="">
              <p for="">Iphone 10</p>
              <label for="">R$ 5000</label>
              <button onClick="addToCart(produto1, './assets/iphone_10.png', 'Iphone10', 'R$ 5000')">Adicionar Carrinho</button>
          </div>

          <div class="produto-info" id="produto2">
            <img src="./assets/iphone_11.png" alt="">
            <p for="">Iphone 11</p>
            <label id="preco2" for="">R$ 5500</label>
            <button onClick="addToCart(produto2, './assets/iphone_11.png', 'Iphone11', 'R$ 5500')">Adicionar Carrinho</button>
        </div>

          <div class="produto-info" id="produto3">
            <img src="./assets/lg_g5.png" alt="">
            <p for="">LG G5</p>
            <label for="">R$ 1100</label>
            <button onClick="addToCart(produto3, './assets/lg_g5.png', 'LG G5', 'R$ 1100')">Adicionar Carrinho</button>
        </div>

        <div class="produto-info" id="produto4">
          <img src="./assets/motorola_g8.png" alt="">
          <p for="">Motorola G8</p>
          <label for="">R$ 1300</label>
          <button onClick="addToCart(produto4, './assets/lg_g5.png', 'Motorola G8', 'R$ 1300')">Adicionar Carrinho</button>
      </div>

        <div class="produto-info" id="produto5">
          <img src="./assets/samsung_s10.png" alt="">
          <p for="">Samsung S10</p>
          <label for="">R$ 1400</label>
          <button onClick="addToCart(produto5, './assets/samsung_s10.png', 'Samsung S10', 'R$ 1400')">Adicionar Carrinho</button>
      </div>

      <div class="produto-info" id="produto6">
        <img src="./assets/samsung_s9.png" alt="">
        <p for="">Samsung S9</p>
        <label for="">R$ 1100</label>
        <button onClick="addToCart(produto6, './assets/samsung_s9.png', 'Samsung S9', 'R$ 1100')">Adicionar Carrinho</button>
    </div>

    <div class="produto-info" id="produto7">
      <img src="./assets/xiaomi_9.png" alt="">
      <p for="">Xiaomi 9</p>
      <label for="">R$ 1600</label>
      <button onClick="addToCart(produto7, './assets/xiaomi_9.png', 'Xiaomi 9', 'R$ 1600')">Adicionar Carrinho</button>
    </div>

    <div class="produto-info" id="produto8">
      <img src="./assets/xiomi_8.png" alt="">
      <p for="">Xiaomi 8</p>
      <label for="">R$ 1300</label>
      <button onClick="addToCart(produto8, './assets/xiomi_8.png', 'Xiaomi 8', 'R$ 1300')">Adicionar Carrinho</button>
    </div>

      </div>

      <div class="carrinho-completo" id="carrinho-completo">
        <div class="carrinho-header">
          <button onClick="closeCart()"><i class="fas fa-times"></i></button>
          <label for=""></label>
        </div>
        <h2>Seu Carrinho</h2>
        <div class="carrinho-body" id="carrinho-body">

        </div>

        <div class="total">
          <h2 id="preco"> </h2>
        </div>
       

      </div>
    </div>
  </div>

    <script>
      var produtos = []
      var preco_final = 0
      var quantidade = document.getElementById('quantidade')
      var carrinho = document.getElementById('carrinho-completo')
      var carrinho_itens = document.getElementById('carrinho-body')
      var valor_dos_produtos = document.getElementById('preco')
    

      function removerProduto(produto,preco){
        const index = produtos.indexOf(produto)
        if(index > -1){
          produtos.splice(index,1)
          quantidade.innerText  = produtos.length
          novo_preco=preco_final-preco
          valor_dos_produtos.innerText = novo_preco
        }
      }

      function implementarDivProduto(produto, imagem,nome,preco){
     
         //Criando div do produto
         var div_produto = document.createElement('div')
          div_produto.className = "produto-no-carrinho"

        //Criando divs internas
         var descricao_produto = document.createElement('div')
         descricao_produto.className = "descricao-produto-carrinho"

         var div_quantidade= document.createElement('div')
          div_quantidade.className="alterar-quantidade"

         //Criando elementos do produto
         var imagem_produto = document.createElement('img')
         var nome_produto = document.createElement('h2')
         var preco_produto = document.createElement('label')
         var remover_produto = document.createElement('button')

         var quantidade_produto = document.createElement('span')
         var quantidade_atualizada = 1
         var valor_produto= (Number(preco.split(' ')[1]))

        //Setando valores para os produtos
          imagem_produto.src = imagem
          nome_produto.innerText = nome
          preco_produto.innerText= preco
          quantidade_produto.innerText = quantidade_atualizada

          preco_final = Number(preco_final) + Number(valor_produto)
          valor_dos_produtos.innerText = `O seu total é de: ${preco_final}`
        

        //Configurando Preço/Quantidade
         var botao_aumentar_quantidade = document.createElement('button')
         botao_aumentar_quantidade.onclick = function(){
            quantidade_atualizada+=1

            var preco_atualizado = (Number(preco.split(' ')[1])*(quantidade_atualizada))
            preco_final+=valor_produto
            valor_dos_produtos.innerText = `O seu total é de: ${preco_final}`
          
            quantidade_produto.innerText = quantidade_atualizada
            return preco_atualizado

           
          }

         var botao_diminuir_quantidade = document.createElement('button')
         botao_diminuir_quantidade.onclick = function(){
          var preco_atualizado = (Number(preco.split(' ')[1])*quantidade_atualizada)

           if(quantidade_atualizada >1){
            quantidade_atualizada-=1
           
            quantidade_produto.innerText = quantidade_atualizada

            preco_final-=valor_produto
            valor_dos_produtos.innerText = `O seu total é de: ${preco_final}`

           }
           return preco_atualizado
           
          }

         var icone_aumentar_quantidade = document.createElement('i')
         var icone_diminuir_quantidade = document.createElement('i')

         //Configurando botão de remover
          remover_produto.innerText = 'Remover'
          remover_produto.onclick = function(){
            carrinho_itens.removeChild(div_produto)
            removerProduto(produto,preco_final)

          }

          //Configurando div de quantidade
          icone_aumentar_quantidade.className = "fas fa-arrow-up"
          icone_diminuir_quantidade.className = "fas fa-arrow-down"

          botao_aumentar_quantidade.appendChild(icone_aumentar_quantidade)

          botao_diminuir_quantidade.appendChild(icone_diminuir_quantidade)

          div_quantidade.append(botao_aumentar_quantidade, quantidade_produto, botao_diminuir_quantidade)

          //Configurando div de descrição do produto
            descricao_produto.append(nome_produto, preco_produto, remover_produto)

          //Adicionando os elementos na div do produto
            div_produto.append(imagem_produto, descricao_produto,div_quantidade)

          //Adicionar produto no carrinho
          carrinho_itens.append(div_produto)

      }


      function addToCart(produto,imagem,nome,preco){
        var produtoEscolhido = document.getElementById(produto.id)
        var checkProduto = produtos.includes(produto)
      
      
        if(checkProduto === false){
          produtos.push(produto)
          quantidade.innerText  = produtos.length
          implementarDivProduto(produto,imagem, nome, preco)
        }


        carrinho.className = "carrinho-completo-aberto"
      


      }


      function closeCart(){
        carrinho.className="carrinho-completo"
      }

      function openCart(){
        carrinho.className = "carrinho-completo-aberto"
      }
      
  

    </script>
</body>
</html>